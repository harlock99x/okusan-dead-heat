<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥¥ã•ã‚“ã®éš£ã€æ­»å®ˆã›ã‚ˆï¼ - Webç‰ˆãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #f0f4f8; text-align: center; margin: 0; padding: 20px; }
        h1 { color: #333; margin-bottom: 10px; }
        
        /* ãƒœãƒ¼ãƒ‰ï¼ˆ6ãƒã‚¹ï¼‰ */
        #board { display: flex; justify-content: center; gap: 10px; margin: 30px auto; max-width: 800px; }
        .cell { width: 100px; height: 100px; border: 3px solid #ccc; background: white; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 12px; position: relative; }
        .cell.goal { border-color: #ff6b6b; background: #fff5f5; font-weight: bold; }
        .cell.goal::after { content: 'å¥¥ã•ã‚“ã®æ•å…ƒ'; font-size: 10px; position: absolute; bottom: 5px; }

        /* çŒ«ã®é§’ */
        .piece { width: 30px; height: 30px; border-radius: 50%; display: inline-block; position: absolute; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .reia { background: #5d4037; } /* ã‚µãƒ“çŒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ */
        .mitsune { background: #8d6e63; } /* ã‚µãƒ“çŒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ */
        .pekko { background: #333; border: 2px solid #fff; } /* ãƒãƒãƒ¯ãƒ¬ã‚¤ãƒ¡ãƒ¼ã‚¸ */

        /* æ“ä½œãƒ‘ãƒãƒ« */
        .controls { background: white; padding: 20px; border-radius: 15px; display: inline-block; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .log { margin-top: 20px; height: 100px; overflow-y: scroll; background: #eee; padding: 10px; font-size: 14px; text-align: left; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #4dabf7; color: white; border: none; border-radius: 5px; margin: 5px; }
        button:disabled { background: #ccc; }

.piece { 
    width: 45px;  /* å°‘ã—å¤§ãã */
    height: 45px; 
    border-radius: 50%; 
    position: absolute; 
    border: 2px solid white; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    z-index: 10;
}
        
    </style>
</head>
<body>

    <h1>å¥¥ã•ã‚“ã®éš£ã€æ­»å®ˆã›ã‚ˆï¼</h1>
    <p>3åŒ¹ã‚’å¥¥ã•ã‚“ã®æ•å…ƒã¸å°ã‘ï¼</p>

    <div id="board">
        <div class="cell" id="cell0">ä¸»äººã®è…•</div>
        <div class="cell" id="cell1">å»Šä¸‹</div>
        <div class="cell" id="cell2">ãƒªãƒ“ãƒ³ã‚°</div>
        <div class="cell" id="cell3">ã‚½ãƒ•ã‚¡</div>
        <div class="cell" id="cell4">å¯å®¤</div>
        <div class="cell" id="cell5">ãƒ™ãƒƒãƒ‰ä¸‹</div>
        <div class="cell goal" id="cell6">è–åŸŸ</div>
    </div>

    <div class="controls">
        <p id="turn-info">ç¾åœ¨ã®æ‰‹ç•ª: <span id="current-cat-name">???</span></p>
        <button id="draw-btn" onclick="playTurn()">ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>
        <div class="log" id="log">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼</div>
    </div>

    <script>

const cats = [
    { id: 'reia', name: 'ãƒ¬ã‚¤ã‚¢', pos: 0, class: 'reia', img: 'reia.jpg', type: 'wait' },
    { id: 'mitsune', name: 'ãƒŸãƒ„ãƒ', pos: 0, class: 'mitsune', img: 'mitsune.jpg', type: 'escape' },
    { id: 'pekko', name: 'ãƒšãƒƒã‚³', pos: 0, class: 'pekko', img: 'pekko.jpg', type: 'attack' }
];

const deck = [
    { name: 'å…¨åŠ›ãƒ€ãƒƒã‚·ãƒ¥', move: 2, msg: 'ãŒçŒ›ãƒ€ãƒƒã‚·ãƒ¥ï¼' },
    { name: 'ã‚¹ãƒ«ã‚¹ãƒ«é€²ã‚€', move: 1, msg: 'ãŒå¿ã³å¯„ã‚‹ã€‚' },
    { name: 'ç§˜å¯†ã®æŠœã‘é“', move: 3, msg: 'ã‚’ç™ºè¦‹ï¼ä¸€æ°—ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼' },
    { name: 'ä¸»äººã®æŠ±ã£ã“', move: -99, msg: 'ã«æ•ã¾ã£ãŸï¼â€¦ãŒã€è„±å‡ºã§ãã‚‹ã‹ï¼Ÿï¼' },
    { name: 'çœŸå¤œä¸­ã®å¤§é‹å‹•ä¼š', move: 0, msg: 'ç™ºç”Ÿï¼å…¨å“¡ã®å ´æ‰€ãŒã‚ã¡ã‚ƒãã¡ã‚ƒã ï¼', event: 'shuffle' },
    { name: 'ãŠå°»ãƒˆãƒ³ãƒˆãƒ³è¦æ±‚', move: 0, msg: 'ãŒãƒˆãƒ³ãƒˆãƒ³ã‚’è¦æ±‚ã€‚ä¸»äººã¯å‹•ã‘ãªã„ï¼', event: 'stop' }
];

function playTurn() {
    const cat = cats[currentCatIndex];
    const card = deck[Math.floor(Math.random() * deck.length)];
    const log = document.getElementById('log');
    let message = `ã€${cat.name}ã€‘ ${card.name}: ${card.msg}`;

    // ç‰¹æ®Šã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
    if (card.event === 'shuffle') {
        cats.forEach(c => c.pos = Math.floor(Math.random() * 5));
        message = "ğŸ  çœŸå¤œä¸­ã®å¤§é‹å‹•ä¼šï¼å…¨å“¡ãƒãƒ©ãƒãƒ©ã«ãªã£ãŸï¼";
    } else if (card.move === -99) {
        // ã‚­ãƒ£ãƒ©åˆ¥è„±å‡ºåˆ¤å®š
        if (cat.type === 'escape' && Math.random() > 0.5) {
            message = `ã€${cat.name}ã€‘ æ¶²ä½“åŒ–ï¼ä¸»äººã®è…•ã‚’ã™ã‚ŠæŠœã‘ãŸï¼`;
        } else if (cat.type === 'attack' && Math.random() > 0.4) {
            message = `ã€${cat.name}ã€‘ çˆªã¨å’†å“®ï¼ä¸»äººãŒæ€¯ã‚“ã§é€ƒã’åˆ‡ã£ãŸï¼`;
        } else {
            cat.pos = 0;
        }
    } else {
        cat.pos += card.move;
    }

    // ãƒ¬ã‚¤ã‚¢ã®è¿½å¾“èƒ½åŠ›ï¼ˆä»–ã®äººãŒå‹•ã„ãŸæ™‚ï¼‰
    if (cat.id !== 'reia' && Math.random() > 0.7) {
        cats.find(c => c.id === 'reia').pos += 1;
        message += " (ãƒ¬ã‚¤ã‚¢ã‚‚ã“ã£ãã‚Šã¤ã„ã¦ããŸï¼)";
    }

    log.innerHTML = `<div>${message}</div>` + log.innerHTML;
    
    if (cat.pos >= 6) {
        alert(`${cat.name}ãŒå¥¥ã•ã‚“ã®éš£ã‚’å æ‹ ï¼å‹åˆ©ï¼`);
        resetGame();
    } else {
        currentCatIndex = (currentCatIndex + 1) % cats.length;
        updateBoard();
    }
}
        
    </script>
</body>
</html>
